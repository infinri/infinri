<?php
/**
 * Admin Menu Template
 * 
 * @var \Infinri\Core\Block\Adminhtml\Menu $block
 */
$menuItems = $block->getMenuItems();
?>
<nav class="admin-menu">
    <ul class="admin-menu-list">
        <?php foreach ($menuItems as $item): ?>
            <li class="admin-menu-item <?= $block->isActive($item) ? 'active' : '' ?> <?= $block->hasChildren($item) ? 'has-children' : '' ?>">
                
                <?php if (isset($item['url'])): ?>
                    <a href="<?= $block->escapeHtml($item['url']) ?>" class="admin-menu-link">
                        <?php if (isset($item['icon'])): ?>
                            <span class="admin-menu-icon <?= $block->escapeHtml($item['icon']) ?>"></span>
                        <?php endif; ?>
                        <span class="admin-menu-title"><?= $block->escapeHtml($item['title']) ?></span>
                    </a>
                <?php else: ?>
                    <div class="admin-menu-link">
                        <?php if (isset($item['icon'])): ?>
                            <span class="admin-menu-icon <?= $block->escapeHtml($item['icon']) ?>"></span>
                        <?php endif; ?>
                        <span class="admin-menu-title"><?= $block->escapeHtml($item['title']) ?></span>
                        <?php if ($block->hasChildren($item)): ?>
                            <span class="admin-menu-arrow">â–¼</span>
                        <?php endif; ?>
                    </div>
                <?php endif; ?>
                
                <?php if ($block->hasChildren($item)): ?>
                    <ul class="admin-submenu <?= $block->isActive($item) ? 'active' : '' ?>">
                        <?php foreach ($item['children'] as $child): ?>
                            <li class="admin-submenu-item <?= $block->isActive($child) ? 'active' : '' ?>">
                                <a href="<?= $block->escapeHtml($child['url']) ?>" class="admin-submenu-link">
                                    <?= $block->escapeHtml($child['title']) ?>
                                </a>
                            </li>
                        <?php endforeach; ?>
                    </ul>
                <?php endif; ?>
                
            </li>
        <?php endforeach; ?>
    </ul>
</nav>
