<?php
/**
 * Messages Template
 * Displays flash messages to the user
 * 
 * @var \Infinri\Core\Block\Template $block
 */

$messagesViewModel = $block->getViewModel();

// Check if there are messages to display
if (!$messagesViewModel || !method_exists($messagesViewModel, 'hasMessages') || !$messagesViewModel->hasMessages()) {
    return;
}

$messages = $messagesViewModel->getMessages();
?>
<div class="messages" data-auto-hide="5000">
    <?php foreach ($messages as $message): ?>
        <?php
        $type = $message['type'] ?? 'info';
        $text = $message['text'] ?? '';
        ?>
        <div class="message message-<?= $block->escapeHtmlAttr($type) ?>" 
             role="status"
             aria-live="polite">
            <div class="message-content">
                <span class="message-text"><?= $block->escapeHtml($text) ?></span>
            </div>
            <button type="button" 
                    class="message-close" 
                    aria-label="Close message"
                    onclick="this.parentElement.remove()">
                &times;
            </button>
        </div>
    <?php endforeach; ?>
</div>
